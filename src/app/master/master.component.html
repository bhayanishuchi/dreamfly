<div class="container-fluid">
  <div class="row" style="text-align: center"><h2> Angular Calender</h2></div>
  <div class="row content">
    <div class="col-sm-3 sidenav">
      <h4><small>
        <!--        <app-header [(view)]="view" [(viewDate)]="viewDate"></app-header>-->
      </small></h4>
      <hr>
      <h4>
        <div class="alert alert-info">
          Parking
        </div>
      </h4>
      <div
        class="card" mwlDroppable (drop)="externalDrop($event.dropData.event)" dragOverClass="drag-over">
        <div class="card-body">
          <p *ngIf="externalEvents.length === 0"><em>No More Park Events</em></p>
          <ul>
            <li
              *ngFor="let event of externalEvents"
              mwlDraggable
              [dropData]="{event: event}"
              dragActiveClass="drag-active">
              <label style="cursor: pointer" [style.color]="event.color.primary">
                {{ event.title }}
              </label>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="col-sm-9">
      <h4><small>
        <app-header [(view)]="view" [(viewDate)]="viewDate"></app-header>
      </small></h4>
      <hr>
      <h4>
        <div class="alert alert-info">
          Click on a day or time slot on the view.
          <strong *ngIf="clickedDate">You clicked on this time: {{ clickedDate | date:'medium' }}</strong>
          <strong *ngIf="clickedColumn != null">You clicked on this column: {{ clickedColumn }}</strong>
        </div>
      </h4>
      <hr>

      <ng-template #eventTemplate let-weekEvent="weekEvent">
        <div [title]="getTitle(weekEvent.event)" [ngClass]="(weekEvent.event.totalTime === 2) ? 'two-min-width' : 'four-min-width'"
             [ngStyle]="{'background-color': weekEvent.event.color.secondary, 'border-color': weekEvent.event.color.primary}">
          <input type="checkbox" (change)="checkBoxCheck(weekEvent.event)"> <span
          style="color: #1e90ff"> {{weekEvent.event.title}}</span>
          <!-- <div style="font-size: 10px;">{{weekEvent.event.start | date: 'longDate'}}</div>
           <div style="font-size: 10px;">{{weekEvent.event.myDate | date: 'HH:mm'}}
             - {{weekEvent.event.end | date: 'HH:mm'}}</div>-->
        </div>
      </ng-template>

      <div [ngSwitch]="view">
        <mwl-calendar-month-view
          *ngSwitchCase="'month'"
          [viewDate]="viewDate"
          [events]="events"
          (columnHeaderClicked)="clickedColumn = $event.isoDayNumber"
          (dayClicked)="clickedDate = $event.day.date"
          (eventClicked)="handleEvent('Clicked', $event.event)"
          (eventTimesChanged)="eventDropped($event)"
          [activeDayIsOpen]="activeDayIsOpen"
          [refresh]="refresh">
        </mwl-calendar-month-view>
        <!--        (beforeViewRender)="beforeMonthViewRender($event)"-->
        <!--        (dragEventChanged)="dragEventChanged($event)"-->
        <mwl-calendar-week-view
          *ngSwitchCase="'week'"
          [viewDate]="viewDate"
          [events]="events"
          [eventTemplate]="eventTemplate"
          (dayHeaderClicked)="clickedDate = $event.day.date"
          (hourSegmentClicked)="OnDayClickedEvent(clickedDate = $event.date)"
          (beforeViewRender)="beforeWeekViewRender($event)"
          [snapDraggedEvents]="false"
          (eventClicked)="handleEvent('Clicked', $event.event)"
          (eventTimesChanged)="eventDropped($event)"
          [dayStartHour]="2"
          [refresh]="refresh">
        </mwl-calendar-week-view>
        <mwl-calendar-day-view
          *ngSwitchCase="'day'"
          time
          [viewDate]="viewDate"
          [events]="events"
          [eventTemplate]="eventTemplate"
          [dayStartHour]="9"
          (hourSegmentClicked)="OnDayClickedEvent(clickedDate = $event.date)"
          (eventClicked)="handleEvent('Clicked', $event.event)"
          (eventTimesChanged)="eventDropped($event)"
          [snapDraggedEvents]="false"
          (beforeViewRender)="beforeDayViewRender($event)"
          [refresh]="refresh">
        </mwl-calendar-day-view>
      </div>
    </div>
  </div>
</div>

<div class="backdrop" [ngStyle]="{'display':display}"></div>
<div class="modal" id="myModal" [ngStyle]="{'display':display}">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Modal Heading</h4>
        <button type="button" class="close" (click)="onCloseHandled()">&times;</button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>Event</label>
            <input type="text" class="form-control" name="title" [(ngModel)]="eventData.title">
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label>Start Date</label>
              <dx-date-box
                [(min)]="startValue"
                type="datetime"
                [(value)]="eventData.start">
              </dx-date-box>
            </div>
            <div class="form-group col-md-6">
              <label>End Date</label>
              <dx-date-box
                [(min)]="startValue"
                type="datetime"
                [(value)]="eventData.end">
              </dx-date-box>
              <!-- <div class="form-group">
                 <div class='input-group date' id='datetimepicker5'>
                   <input size="16" type="text" value="2012-06-15 14:45" readonly class="form_datetime">

                 </div>
               </div>-->
            </div>
          </div>
          <div class="form-group">
            <label>All Day</label>
            <dx-switch #switch [value]="false" (click)="onChange(switch.value)"></dx-switch>
          </div>
          <div class="form-group">
            <label>Select Color</label>
            <select name="color" [(ngModel)]="eventData.color" class="form-control">
              <option value="blue">Blue</option>
              <option value="yellow">Yellow</option>
            </select>
          </div>
        </form>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="onSubmit()">Add</button>
        <button type="button" class="btn btn-danger" (click)="onCloseHandled()">Close</button>
      </div>

    </div>
  </div>
</div>

<!--<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display}"> 
  <div class="modal-dialog" role="document">   
    <div class="modal-content">     
      <div class="modal-header">
               <h4 class="modal-title">Model Title</h4>       
        <button type="button" class="close" aria-label="Close" (click)="onCloseHandled()">
          <span aria-hidden="true">&times;</span>
        </button>     
      </div>     
      <div class="modal-body">       
        <div class="row">
          <div class="col-md-3">
            <label>Event Name:</label>
          </div>
          <div class="col-md-9">
            <input type="text" class="form-control">
          </div>
        </div> 
        <div class="row">
          <div class="col-md-6">
            <div class="col-md-12">
              <label>Start Date:</label>
              <input type="date" class="form-control">
            </div>
          </div>
          <div class="col-md-6">
            <div class="col-md-12">
              <label>End Date:</label>
              <input type="date" class="form-control">
            </div>
          </div>
        </div> 
        <div class="row">
          <div class="col-md-3">
            <label>All Day:</label>
          </div>
          <div class="col-md-9">
            <input type="checkbox" class="form-control">
          </div>
        </div> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="onCloseHandled()">Close</button> 
      </div>
    </div>&lt;!&ndash; /.modal-content &ndash;&gt;
  </div>&lt;!&ndash; /.modal-dialog &ndash;&gt;
</div>&lt;!&ndash; /.modal !&ndash;&gt;-->


<!--
<app-header></app-header>
<div class="alert alert-info">
  Click on a day or time slot on the view.
  <strong *ngIf="clickedDate"
  >You clicked on this time: {{ clickedDate | date:'medium' }}</strong
  >
  <strong *ngIf="clickedColumn != null"
  >You clicked on this column: {{ clickedColumn }}</strong
  >
</div>

<div [ngSwitch]="view">
  <mwl-calendar-month-view
    *ngSwitchCase="'month'"
    [viewDate]="viewDate"
    [events]="events"
    (columnHeaderClicked)="clickedColumn = $event.isoDayNumber"
    (dayClicked)="clickedDate = $event.day.date"
  >
  </mwl-calendar-month-view>
  <mwl-calendar-week-view
    *ngSwitchCase="'week'"
    [viewDate]="viewDate"
    [events]="events"
    (dayHeaderClicked)="clickedDate = $event.day.date"
    (hourSegmentClicked)="clickedDate = $event.date"
  >
  </mwl-calendar-week-view>
  <mwl-calendar-day-view
    *ngSwitchCase="'day'"
    [viewDate]="viewDate"
    [events]="events"
    (hourSegmentClicked)="clickedDate = $event.date"
  >
  </mwl-calendar-day-view>
</div>
-->
